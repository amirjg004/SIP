"lg"==localStorage_getItem("colorTheme")?$("#ui_colors").attr("href","css/colors/lg.css"):"android"==localStorage_getItem("colorTheme")?$("#ui_colors").attr("href","css/colors/android.css"):"yellow"==localStorage_getItem("colorTheme")?$("#ui_colors").attr("href","css/colors/yellow.css"):"green"==localStorage_getItem("colorTheme")?$("#ui_colors").attr("href","css/colors/green.css"):"violet"==localStorage_getItem("colorTheme")?$("#ui_colors").attr("href","css/colors/violet.css"):$("#ui_colors").attr("href","css/colors/lg.css"),sessionStorage.getItem("ajaxTimeout")&&$.ajaxSetup({timeout:ajaxTimeout});var tvModel=navigator.userAgent,webOSNative=!0;if(localStorage_getItem("myUzer"))var myUzer=localStorage_getItem("myUzer");else myUzer="default-lg";if(localStorage_getItem("secret")?secret=localStorage_getItem("secret"):secret="",localStorage_getItem("epgId")?epgId=localStorage_getItem("epgId"):epgId="",localStorage_getItem("initPortal")?initPortal=localStorage_getItem("initPortal"):initPortal="on",localStorage_getItem("zoomOption"))var zoomOption=localStorage_getItem("zoomOption");else zoomOption="original";if(hlsMode=!1,"on"==localStorage_getItem("dvbMode")?dvbChannelsImport=!0:dvbChannelsImport=!1,-1!=tvModel.indexOf("Media")?mediaDevice=!0:mediaDevice=!1,"on"==localStorage_getItem("DST")?DST=1:DST=0,localStorage_getItem("timeTune")){var timeTune=localStorage_getItem("timeTune");DST=Number(DST)+Number(timeTune)}localStorage_getItem("epgTheme")?selectedEPGColor=localStorage_getItem("epgTheme"):selectedEPGColor="#A2835B";var privateList=localStorage_getItem("privateList");localStorage_getItem("allTimers")?allTimersArray=JSON.parse(localStorage_getItem("allTimers")):allTimersArray={};var currentDate=new Date;currentDate.setHours(currentDate.getHours()+DST);var epochDate=new Date;epochDate=epochDate.getTime();var checkDate=new Date;epgDate=new Date;var mousePrevSelected,chNr,chName,ibarTimeOut,epgInterval,pageItems=15,menuChannelCookie="currentChannel",menuPrevChCookie="previousChannel",menuGroupCookie="currentGroup",scriptsPath="https://scr.siptv.app/common/scripts/",epgPath="https://epg.siptv.app/common/scripts/",imagesPath="",iconsPath="https://img.siptv.app/",allScriptsPath="https://all.siptv.app/";"list"==localStorage_getItem("groupScroll")?groupScroll=!1:groupScroll=!0;var mouseOffTimeOut,marqueeTimeout,historyTimeout,bufferInterval,fileToDelete,infoPrevSelected,epgInfoPrevSelected,pgNr,menuChanSelected,chanSelected,prevChanSelected,numberKeyTimer,chanPiconLength,audioLangTimeout,mbitSec=0,valueIncrement=0,scrollPosition=0,chanInfoHeight=0,progScrollHeight=0,currentNumberKeyInput="",maxEPGLength=745,maxArcEPGLength=780,maxArcDays=15,audioWindow=!1,subsWindow=!1,audioSet=!1,audioIDSelected=0,audioPrevIDSelected=0,audioOKPressed=!1,audioInfoReady=!1,subsSet=!1,subsIDSelected=0,subsPrevIDSelected=0,subsOKPressed=!1,subsInfoReady=!1,backPath="channels.html",clockOn=!1,mouseOn=!1,keyNrOn=!1,groupOn=!1,permInfobar=!1,dataLoaded=!1,MenuExecuted=!1,grExecuted=!1,containerOn=!1,toRemoveHLS=!1,arcExecuted=!1,arcFromMenu=!1,extList=!1,menuLaunch=!1,channelsLoaded=!1,chanHistory=[],historyExecuted=!1,chInfoExecuted=!1,parentExecuted=!1,firstLoad=!0,chDataLoaded=!1,codeData=["ext"];function initPage(){loadChInfo(),setCurrentTime(),setInterval(setCurrentTime,1e3),rebindKeys(),keyEvents(),fsJqEvents(),preloadImages(),"on"==localStorage_getItem("fsClock")&&clockToggle(),colorize()}function colorize(){$("#menu_channelInfoTitle, #menu_channelInfoNext").css("color",selectedEPGColor),$("#channelTime1, #channelTime2, #channelEPGnow, #channelEPGlater, #channelLeft1, #channelLeft2").css("color",selectedEPGColor),$("#channelInfoTitle").css("color",selectedEPGColor)}function preloadImages(){$([imagesPath+"images/new/infobar.png",imagesPath+"images/new/fs_button.png",imagesPath+"images/new/fs_chan_back_w.png",imagesPath+"images/new/fs_chan_top_w.png",imagesPath+"images/new/fs_chan_bottom_w.png",imagesPath+"images/desc_fader.png",imagesPath+"images/info_dot.png",imagesPath+"images/new/mm_info.png",imagesPath+"images/new/mm_epg.png"]).preload()}function keyEvents(){var e=event.which;if(VK_0<e&&VK_9>=e)return keyNrOn=!0,void numberKeyPress(e-VK_0);switch(e){case VK_ENTER:keyNrOn?numberKeySubmit():menuActivate();break;case VK_UP:containerOn?infoScrollUp(40):keyNrOn||showDescription();break;case VK_DOWN:containerOn?infoScrollDown(40):keyNrOn||historyActivate();break;case VK_RIGHT:keyNrOn||(nextChannel(),refreshStream());break;case VK_LEFT:keyNrOn||(previousChannel(),refreshStream());break;case VK_PAGE_UP:nextChannel(),refreshStream();break;case VK_PAGE_DOWN:previousChannel(),refreshStream();break;case VK_INFO:case VK_I:showDescription();break;case VK_BACK:"block"!=$("#infoBar").css("display")||mouseOn?"off"==initPortal?backToHome():window.location.replace(backPath):(hideInfo(),chanDescriptionScrollReset());break;case VK_0:keyNrOn?numberKeyPress(e-VK_0):loadPrevChannel();break;case VK_RED:case VK_R:webOSNative?audioInfoReady&&chooseAudioLang():mediaDevice||broadcastToggle();break;case VK_GREEN:arcFromMenu=!1,arcActivate();break;case VK_YELLOW:case VK_Y:clockToggle();break;case VK_BLUE:case VK_L:localStorage_setItem("backPath","fullscreen"),window.location.replace("settings.html");break;case VK_STOP:case VK_S:restartVideo();break;case VK_B:"block"!=$("#infoBar").css("display")||mouseOn?window.location.replace(backPath):(hideInfo(),chanDescriptionScrollReset());break;case VK_E:arcFromMenu=!1,arcActivate();break;case VK_F:addFavourite()}}function keyEventsUp(){switch(event.which){case VK_PLAY:case VK_P:bcastExecuted||livePlay();break;case VK_PAUSE:case VK_A:bcastExecuted||livePause()}}function keyEventsLong(e){switch(e.which){case VK_PLAY:case VK_P:bcastExecuted||livePlay();break;case VK_PAUSE:case VK_A:bcastExecuted||livePause()}}function fsMenuKeyEvents(){$(document).unbind("keydown keyup").keydown(function(){switch(event.which){case VK_ENTER:channelLaunch();break;case VK_UP:chanSelector(-1);break;case VK_DOWN:chanSelector(1);break;case VK_RIGHT:!groupOn||groupScroll?fsPageUp():(groupNr++,switchGroup());break;case VK_LEFT:!groupOn||groupScroll?fsPageDown():(groupNr--,switchGroup());break;case VK_PAGE_DOWN:groupOn&&groupScroll?(groupNr++,switchGroup()):fsPageUp();break;case VK_PAGE_UP:groupOn&&groupScroll?(groupNr--,switchGroup()):fsPageDown();break;case VK_BACK:case VK_B:restoreLocation(),menuDeactivate();break;case VK_GREEN:case VK_E:arcFromMenu=!0,arcActivate();break;case VK_YELLOW:case VK_Y:chSortType++,sortChannels(),firstLoad=!0,menuActivate();break;case VK_BLUE:case VK_L:groupsActivate();break;case VK_INFO:case VK_I:chListEPGShow();break;case VK_RED:case VK_F:if("Favourites"!=activeGroup){addFavourite();break}removeFavourite(!0)}})}function fsChListEPGKeyEvents(){$(document).unbind("keydown keyup").keydown(function(){switch(event.which){case VK_INFO:case VK_BACK:case VK_I:case VK_B:chListEPGHide()}})}function fsGroupsKeyEvents(){$(document).unbind("keydown keyup").keydown(function(){switch(event.which){case VK_ENTER:groupSelect();break;case VK_UP:grChanSelector(-1);break;case VK_DOWN:grChanSelector(1);break;case VK_RIGHT:case VK_PAGE_DOWN:grChanSelector(15);break;case VK_LEFT:case VK_PAGE_UP:grChanSelector(-15);break;case VK_BACK:case VK_B:case VK_BLUE:case VK_L:menuActivate();break;case VK_YELLOW:case VK_Y:resetGroup()}})}function fsArcKeyEvents(){$(document).unbind("keydown keyup").keydown(function(){switch(event.which){case VK_ENTER:arcChannelLaunch();break;case VK_UP:arcChanSelector(-1);break;case VK_DOWN:arcChanSelector(1);break;case VK_RIGHT:arcChanSelector(15);break;case VK_LEFT:arcChanSelector(-15);break;case VK_GREEN:case VK_BACK:case VK_E:case VK_B:arcDeactivate();break;case VK_RED:case VK_F:setTimer();break;case VK_PAGE_UP:case VK_YELLOW:dayUp();break;case VK_PAGE_DOWN:case VK_BLUE:dayDown()}})}function fsHistoryKeyEvents(){$(document).unbind("keydown keyup").keydown(function(){switch(event.which){case VK_ENTER:historyChannelLaunch();break;case VK_UP:historyChanSelector(-1);break;case VK_LEFT:historyChanSelector("left");break;case VK_RIGHT:historyChanSelector("right");break;case VK_DOWN:historyChanSelector(1);break;case VK_0:historyChanSelector(0);break;case VK_BACK:case VK_B:historyDeactivate()}})}function fsChInfoKeyEvents(){$(document).unbind("keydown keyup").keydown(function(){switch(event.which){case VK_ENTER:arcChannelLaunch();break;case VK_UP:arcChanSelector(-1);break;case VK_DOWN:arcChanSelector(1);break;case VK_RIGHT:arcChanSelector(15);break;case VK_LEFT:arcChanSelector(-15);break;case VK_GREEN:case VK_BACK:case VK_B:arcDeactivate()}})}function fsAudioKeyEvents(){$(document).unbind("keydown keyup").keydown(function(){switch(event.keyCode){case VK_ENTER:setAudioLang();break;case VK_UP:selectAudioLang(-1);break;case VK_DOWN:selectAudioLang(1);break;case VK_RED:case VK_R:chooseAudioLang();break;case VK_GREEN:case VK_G:chooseSubsLang();break;case VK_BACK:case VK_B:chooseAudioLang()}})}function fsSubsKeyEvents(){$(document).unbind("keydown keyup").keydown(function(){switch(event.keyCode){case VK_ENTER:setSubsLang();break;case VK_UP:selectSubsLang(-1);break;case VK_DOWN:selectSubsLang(1);break;case VK_RED:case VK_R:chooseAudioLang();break;case VK_GREEN:case VK_G:case VK_BACK:chooseSubsLang()}})}function parentKeyEvents(){$(document).unbind("keydown keyup").keydown(function(){var e=event.which;if(VK_0<=e&&VK_9>=e)parentKeyPress(e-VK_0);else switch(e){case VK_ENTER:!mouseOn&&$("#parentKeyboard").is(":visible")?parentKeyPress(lastNumKeyStep):parentKeySubmit();break;case VK_BACK:case VK_B:parentHide();break;case VK_LEFT:numKeyStep(-1);break;case VK_RIGHT:numKeyStep(1);break;case VK_UP:numKeyStep(-5);break;case VK_DOWN:numKeyStep(5)}}),$(".parentNumKey").click("numClick",function(){$(this).unbind("numClick"),parentKeyPress($(this).html())}),$(".parentNumKey").hover(function(){lastNumKeyStep=Number($(this).html()),$(".parentNumKey").removeClass("selected"),$(".num"+lastNumKeyStep).addClass("selected")},function(){$(".parentNumKey").removeClass("selected")}),$(".parentCtrlKey").click("ctrlClick",function(){$(this).unbind("ctrlClick"),"OK"==$(this).html()?parentKeySubmit():parentHide()}),$("#parentPopUpOuter").click(function(){parentHide()}).children().click(function(){return!1})}window.onload=initPage,window.onmousemove=onMouseActive,window.onmouseon=onMouseCursorOn,window.onmouseoff=onMouseInactive,$.fn.preload=function(){this.each(function(){$("<img/>")[0].src=this})};var lastNumKeyStep=3,numKeyActive=!1;function numKeyStep(e){onMouseCursorOn("numKeyPress"),numKeyActive&&((lastNumKeyStep+=e)<0&&-1==e&&(lastNumKeyStep=9),lastNumKeyStep<1&&-1==e&&(lastNumKeyStep=0),lastNumKeyStep<1&&-5==e&&(lastNumKeyStep+=10),lastNumKeyStep>9&&1==e&&(lastNumKeyStep=0),lastNumKeyStep>9&&5==e&&(lastNumKeyStep-=10)),$(".parentNumKey").removeClass("selected"),$(".num"+lastNumKeyStep).addClass("selected"),numKeyActive=!0}function howtoKeyEvents(){$(document).unbind("keydown keyup").keydown(function(){switch(event.which){case VK_BACK:showTutorial();break;case VK_B:case VK_INFO:case VK_I:showTutorial()}})}function fsJqEvents(){$("#mediaContainer").click(function(){menuToggle()}),$("#btn_back").click(function(){"off"==initPortal?backToHome():window.location.replace(backPath)}),$("#btn_info").click(function(){showDescription()}),$("#btn_prev").click(function(){historyExecuted?historyDeactivate():historyActivate()}),$("#btn_pause").on("mousedown",function(){longClickTimeout=setTimeout(function(){restartVideo(),longMouseClick=!0},longPressDelay)}).on("mouseup",function(){clearTimeout(longClickTimeout),longMouseClick||(!webOSNative&&1==video.playState||webOSNative&&!video.paused?livePause():livePlay()),longMouseClick=!1}),$("#btn_right").click(function(){nextChannel(),refreshStream()}),$("#btn_left").on("mousedown",function(){longClickTimeout=setTimeout(function(){historyExecuted?historyDeactivate():historyActivate(),longMouseClick=!0},longPressDelay)}).on("mouseup",function(){clearTimeout(longClickTimeout),longMouseClick||(previousChannel(),refreshStream()),longMouseClick=!1}),$("#btn_clock").click(function(){clockToggle()}),$("#btn_epg").click(function(){arcActivate()}),$("#fsYellowButton").click(function(){parentExecuted||(grExecuted?resetGroup():(chSortType++,sortChannels(),firstLoad=!0,menuActivate()))}),$("#fsBlueButton, #topGroupName").click(function(){parentExecuted||groupsActivate()}),$("#fsPrevDay").click(function(){dayUp()}),$("#fsNextDay").click(function(){dayDown()}),$("#menu_channelInfoContent, #chListEPGPopUpOuter").click(function(){chListEPGHide()}),$("#btn_qmenu").mouseover(function(){showPrefButtons()}),$("#btn_qmenu").click(function(){localStorage_setItem("backPath","fullscreen"),window.location.replace("settings.html")}),$("#btn_audio").click(function(){audioInfoReady&&chooseAudioLang()}),$("#audioToolPanel").click(function(){chooseSubsLang()}),$("#subsToolPanel").click(function(){chooseAudioLang()}),$("#fsYellowButton, #fsBlueButton, #fsPrevDay, #fsNextDay").hover(function(){parentExecuted||$(this).addClass("selected")},function(){$(this).removeClass("selected"),$(this).removeClass("active")}),$("#fsYellowButton, #fsBlueButton, #fsPrevDay, #fsNextDay").mousedown(function(){$("*").removeClass("active"),parentExecuted||$(this).addClass("active")}).mouseup(function(){$(this).removeClass("active")})}function showPrefButtons(){$(".pref_button").show()}function loadEPGdata(e){(checkDate=new Date).getMinutes()==epgDate.getMinutes()&&channelsLoaded?(data=epgData,processEPGData(data,e)):$.ajax({method:"POST",url:epgPath+"get_epg_multi.php",data:{list:codeData,epgId:epgId},dataType:"text",timeout:epgTimeout}).done(function(t){t=JSON.parse(t),channelsLoaded=0==t.empty,epgDate=new Date,epgData=t,processEPGData(t,e)}).fail(function(t,a){epgTimeNow=Math.round(currentDate.getTime()/1e3),data='{"epg1":{"'+codeData[0]+'":"EPG Data Offline"},"start1":{"'+codeData[0]+'":'+epgTimeNow+'},"start2":{"'+codeData[0]+'":'+(epgTimeNow+7200)+'},"stop2":{}}',epgData=JSON.parse(data),processEPGData(data,e)})}function processEPGData(e,t){1==dataLoaded&&(t?(groupOn=!1,switchGroup(),"All"!=activeGroup&&(groupOn=!0)):loadMenu(pgNr,chanSelected),MenuExecuted=!0)}function switchGroup(){if(grExecuted=!1,0==chanGroups)return!1;marqueeOff(),groupOn&&(groupNr==chanGroups.length?groupNr=0:-1==groupNr&&(groupNr=chanGroups.length-1)),calcGroupDimensions(),$("#fsYellowButton").show(),chanSelected<=activeGroupStart&&(chanSelected=activeGroupStart+1),pgNr=Math.ceil((chanSelected-activeGroupStart)/pageItems),pageCount=Math.ceil(activeGroupLength/pageItems),groupOn&&(chanSelected=activeGroupStart+1,pgNr=1,localStorage_setItem(menuChannelCookie,chanSelected),"All"==localStorage_getItem(menuGroupCookie)&&sortChannels(),localStorage_setItem(menuGroupCookie,groupNr)),loadMenu(pgNr,chanSelected)}function resetGroup(){if(fsMenuKeyEvents(),0==chanGroups)return!1;marqueeOff(),grExecuted=!1,groupOn=!1,chanSelected=1,pgNr=1,activeGroup="All",activeGroupStart=0,groupNr=-1,channelCount=channelCountGlobal,pageCount=Math.ceil(channelCount/pageItems),localStorage_setItem(menuGroupCookie,"All"),sortChannels(),loadMenu(pgNr,chanSelected),$(document).bind("mousewheel",function(e,t){mouseScroll()})}function menuActivate(){chDataLoaded&&($(document).unbind("mousewheel"),clearTimeout(ibarTimeOut),MenuExecuted=!0,grExecuted=!1,hideInfo(),$("#arc_toolPanel").hide(),fsMenuKeyEvents(),menuChannelCount=channelCount,menuPageCount=pageCount,arcFromMenu||(menuChanSelected=chanSelected,prevChanSelected=chanSelected),menuActiveGroup=activeGroup,menuGroupNr=groupNr,pgNr=Math.ceil(chanSelected/pageItems),"All"!=activeGroup&&0!=chanGroups?loadEPGdata("switchGroup"):(loadEPGdata(),"All"!=activeGroup&&(groupOn=!0)),$(document).bind("mousewheel",function(e,t){mouseScroll()}))}function menuDeactivate(){$("#fs_MenuContainer").remove(),$("#fs_chanMenu").hide(),rebindKeys(),$(document).unbind("mousewheel"),MenuExecuted=!1,grExecuted=!1,mouseOn=!1,groupOn=!1,groupJumpCheck()}function restoreLocation(){chanSelected=menuChanSelected,activeGroup=menuActiveGroup,groupNr=menuGroupNr,channelCount=chData.length-1,pageCount=menuPageCount,chanSelected>channelCount&&(chanSelected=channelCount),chNr=chData[chanSelected].chNr,-1==groupNr&&(activeGroup="All"),localStorage_setItem(menuChannelCookie,chanSelected),localStorage_setItem(menuGroupCookie,groupNr)}function menuToggle(){audioWindow||subsWindow?chooseAudioLangDeactivate():arcExecuted?arcDeactivate():historyExecuted?historyDeactivate():grExecuted?menuActivate():chInfoExecuted?chListEPGHide():MenuExecuted?(restoreLocation(),menuDeactivate(),mouseOn=!1):(hideInfo(),menuActivate())}function arcActivate(){if(sessionStorage.setItem("arcChannelData",JSON.stringify(chData[chanSelected])),chNr=chData[chanSelected].chNr,!bcEPG||arcFromMenu&&bcChannelUrl!=chData[chanSelected].chUrl){if("dvb"!=chData[chanSelected].chNr){var e=new Date;yy=e.getFullYear(),dd=e.getDate(),mm=e.getMonth()+1,dd<10&&(dd="0"+dd),mm<10&&(mm="0"+mm),newDateString=yy+"-"+mm+"-"+dd,$.ajax({method:"GET",url:epgPath+"get_epg_schedule.php",data:{channel:chNr,day:newDateString,epgId:epgId},dataType:"json",timeout:epgTimeout}).done(function(e){e&&(progEPG=e,clearTimeout(ibarTimeOut),arcExecuted=!0,dayNr=0,hideInfo(),historyDeactivate(),$("#toolPanel").hide(),$("#arc_toolPanel").show(),$("#topGroupName").hide(),$("#progRunner").hide(),loadArchive(chanSelected,e),fsArcKeyEvents())}).fail(function(){})}}else getBcChSchedule()}function arcDeactivate(){$("#topLabelName").hide(),$("#fs_MenuContainer").remove(),arcScrollReset(),rebindKeys(),$(document).unbind("mousewheel"),arcExecuted=!1,$("#fsPrevDay, #fsNextDay").hide(),$("#arcDate").hide(),$("#fsTimerButton span").html("Set Timer"),arcFromMenu?($("#toolPanel").show(),$("#topGroupName").show(),menuActivate()):($("#fs_chanMenu").hide(),$("#toolPanel").show(),$("#topGroupName").show()),arcFromMenu=!1,mouseOn=!1,$.each(allTimersArray,function(e,t){0==allTimersArray[e].length&&(delete allTimersArray[e],localStorage_setItem("allTimers",JSON.stringify(allTimersArray)))})}function groupsActivate(){if(0==chanGroups)return!1;grExecuted=!0,fsGroupsKeyEvents(),loadGroups()}function clockToggle(){clockOn?($("#fsClock").hide(),clockOn=!1,localStorage_setItem("fsClock","off")):($("#fsClock").show(),clockOn=!0,localStorage_setItem("fsClock","on"))}function mouseScroll(){!MenuExecuted||arcExecuted||$("#parentPopUpOuter").is(":visible")||(window.event.wheelDelta>0?fsPageDown():fsPageUp())}function onMouseActive(){clearTimeout(mouseOffTimeOut),MenuExecuted||arcExecuted||parentExecuted?MenuExecuted||arcExecuted||$("#parentPopUpOuter").is(":visible")&&!$("#parentKeyboard").is(":visible")&&($("#parentKeyboard").show(),$("#parentPopUp").css("top",($("#parentPopUpOuter").outerHeight()-$("#parentPopUp").outerHeight())/2)):($(".button").show(),mouseOn||"none"!=$("#infoBar").css("display")||showInfo()),!mouseOn&&MenuExecuted&&($("#"+chanSelected).attr("class","fs_eachMenuDefault"),mouseChanSelector(),$("#parentCtrlKeys").show(),$("#parentPopUpOuter").is(":visible")&&!$("#parentKeyboard").is(":visible")&&($("#parentKeyboard").show(),$("#parentPopUp").css("top",($("#parentPopUpOuter").outerHeight()-$("#parentPopUp").outerHeight())/2))),clearTimeout(ibarTimeOut),clearTimeout(historyTimeout),mouseOn=!0}function onMouseCursorOn(e){$("#parentPopUpOuter").is(":visible")&&!$("#parentKeyboard").is(":visible")&&($("#parentKeyboard").show(),e?$("#parentCtrlKeys").hide():$("#parentCtrlKeys").show(),$("#parentPopUp").css("top",($("#parentPopUpOuter").outerHeight()-$("#parentPopUp").outerHeight())/2))}function onMouseInactive(){$("#parentCtrlKeys").hide(),"none"!=$("#channelInfo").css("display")?$(".button, .pref_button, #btn_info").hide():($(".button, .pref_button, #btn_info, #infoBar, #channelInfo").hide(),historyExecuted&&historyDeactivate(),clearInterval(epgInterval),marqueeOff(),onMouseLeave()),mouseOn=!1}function onMouseLeave(){MenuExecuted&&!grExecuted&&shiftFavourites()}function numberKeyPress(e){clearTimeout(numberKeyTimer),1==currentNumberKeyInput.length?(setNumberKeyField(currentNumberKeyInput+=e),numberKeyTimer=setTimeout(numberKeySubmit,1500)):2==currentNumberKeyInput.length?(setNumberKeyField(currentNumberKeyInput+=e),numberKeyTimer=setTimeout(numberKeySubmit,1500)):3==currentNumberKeyInput.length?(setNumberKeyField(currentNumberKeyInput+=e),numberKeyTimer=setTimeout(numberKeySubmit,1500)):4==currentNumberKeyInput.length?(setNumberKeyField(currentNumberKeyInput+=e),numberKeyTimer=setTimeout(numberKeySubmit,1500)):(setNumberKeyField(currentNumberKeyInput=""+e),numberKeyTimer=setTimeout(numberKeySubmit,3e3))}function setNumberKeyField(e){$("#fs_numberKeyField").show(),$("#fs_numberKeyField").html(e)}function numberKeySubmit(){clearTimeout(ibarTimeOut),clearTimeout(numberKeyTimer),$("#fs_numberKeyField").hide(),keyNrOn=!1,menuChanSelected=prevChanSelected=chanSelected,menuGroupNr=groupNr,chanSelected=Number(currentNumberKeyInput),groupJumpCheck(),channelLaunch(),currentNumberKeyInput=""}function showInfo(){"none"==$("#infoBar").css("display")&&"none"==$("#fs_chanMenu").css("display")?((!bcastExecuted||bcastExecuted&&!bcEPG)&&(getChEPG("nozap"),epgInterval=setInterval("getChEPG('nozap');",6e4)),$("#bufferingInfo").hide(),$("#infoBar").show()):($("#infoBar").hide(),$("#channelInfo").hide(),containerOn=!1,clearInterval(epgInterval))}function hideInfo(){$("#infoProgRunner").css("top","0%"),$("#infoBar, #channelInfo, #channelInfoProgress").hide(),$(".button, .pref_button").hide(),$("#bufferingInfo").hide(),$("#debugWindow").hide(),mouseOn=!1,containerOn=!1,clearTimeout(ibarTimeOut),clearInterval(epgInterval)}function showDescription(){"none"==$("#channelInfo").css("display")&&"none"==$("#infoBar").css("display")?((!bcastExecuted||bcastExecuted&&!bcEPG)&&(getChEPG("nozap"),clearInterval(epgInterval),epgInterval=setInterval("getChEPG('nozap');",6e4)),$("#bufferingInfo").hide(),$("#infoBar").show(),clearTimeout(ibarTimeOut),permInfobar||(ibarTimeOut=setTimeout(hideInfo,5e3))):"none"==$("#channelInfo").css("display")&&"block"==$("#infoBar").css("display")?""!=$("#channelInfoTitle").html()?(containerOn=!0,clearTimeout(ibarTimeOut),document.addEventListener("mousewheel",infoMouseScroll,!1),$("#channelInfo").show(),$("#debugWindow").hide(),""!=$("#channelInfoDesc").html()&&"<p></p>"!=$("#channelInfoDesc").html()&&$(".channelInfoTitle").css("padding-bottom","15px"),$("#channelInfoContent")[0].scrollHeight>$("#channelInfoContent").height()&&($("#channelInfoContent").css("margin-right","16px"),progScrollHeight=$("#channelInfoContent")[0].scrollHeight,chanInfoHeight=$("#channelInfoContent").height(),$("#channelInfoProgress").show(),$("#infoProgRunner").css("height",chanInfoHeight/progScrollHeight*$("#channelInfoProgress").height()+"px"),scrollPosition=0,$("#channelInfoContent").scrollTop(0),$("#infoProgRunner").css("top","0")),clearTimeout(ibarTimeOut)):($("#channelInfo").hide(),mouseOn||$("#infoBar").hide(),$("#debugWindow").hide(),$(".channelInfoTitle").css("padding-bottom","0px"),$(".channelInfoMiddle").css("padding-bottom","10px"),clearTimeout(ibarTimeOut),clearInterval(epgInterval)):(chanDescriptionScrollReset(),$("#channelInfo, #channelInfoProgress").hide(),mouseOn||$("#infoBar").hide(),$("#debugWindow").hide(),$("#infoFaderTop, #infoFaderBottom").hide(),$(".channelInfoTitle").css("padding-bottom","0px"),$(".channelInfoMiddle").css("padding-bottom","10px"),$("#channelInfoContent").css("margin-right","0px"),containerOn=!1,clearTimeout(ibarTimeOut))}function nextChannel(){$("#infoProgRunner").css("top","0%"),$("#channelInfo, #channelInfoProgress").hide(),$("#channelInfoContent").css("margin-right","0px"),clearTimeout(ibarTimeOut),historyDeactivate(),prevChanSelected=chanSelected,chanSelected+=1,calcGroupDimensions(),chanSelected>activeGroupEnd&&(chanSelected=activeGroupStart+1),localStorage_setItem(menuChannelCookie,chanSelected)}function previousChannel(){$("#infoProgRunner").css("top","0%"),$("#channelInfo, #channelInfoProgress").hide(),$("#channelInfoContent").css("margin-right","0px"),clearTimeout(ibarTimeOut),historyDeactivate(),prevChanSelected=chanSelected,chanSelected-=1,calcGroupDimensions(),chanSelected<=activeGroupStart&&(chanSelected=activeGroupEnd),localStorage_setItem(menuChannelCookie,chanSelected)}function loadPrevChannel(){$("#infoProgRunner").css("top","0%"),$("#channelInfo, #channelInfoProgress").hide(),$("#channelInfoContent").css("margin-right","0px"),clearTimeout(ibarTimeOut),prevChanToggle(),groupJumpCheck(),localStorage_setItem(menuChannelCookie,chanSelected),refreshStream()}function chanHistoryBuild(){historyItemIndex=chanHistory.indexOf(chanSelected),-1!=historyItemIndex&&chanHistory.splice(historyItemIndex,1),chanHistory.unshift(chanSelected),chanHistory.length>10&&chanHistory.pop(),sessionStorage.setItem("chanHistory",JSON.stringify(chanHistory))}function historyActivate(){chanHistory.length>2?showHistoryItems():loadPrevChannel()}function showHistoryItems(){chooseAudioLangDeactivate(),historyExecuted=!0,historyTimeout=setTimeout(historyChannelLaunch,3e3),fsHistoryKeyEvents();for(var e=1;e<chanHistory.length;e++)1==e?(historySelected=" selected",historyItemSelected=1):historySelected="",chanHistory[e]&&$("#historySelect").append('<div id="history-'+e+'" class="historyItem'+historySelected+'" style="top: '+38*(e-1)+'px">'+chData[chanHistory[e]].chName+"</div>");fsHistoryMouseEvents(),$("#historySelect").show()}function historyChanSelector(e){clearTimeout(historyTimeout),0==e&&(e=1,historyTimeout=setTimeout(historyChannelLaunch,1500)),$("#history-"+historyItemSelected).removeClass("selected"),"left"==e?historyItemSelected=1:"right"==e?historyItemSelected=chanHistory.length-1:(historyItemSelected+=e,historyItemSelected<1&&(historyItemSelected=chanHistory.length-1),historyItemSelected>chanHistory.length-1&&(historyItemSelected=1)),$("#history-"+historyItemSelected).addClass("selected")}function fsHistoryMouseEvents(){$("[id*='history-']").hover(function(){$("[id*='history-']").removeClass("selected"),$(this).addClass("selected")},function(){$(this).removeClass("selected")}),$("[id*='history-']").click(function(){historyItemSelected=$(this).attr("id"),historyItemSelected=historyItemSelected.replace("history-",""),historyChannelLaunch()})}function historyChannelLaunch(){$("#infoProgRunner").css("top","0%"),$("#channelInfo, #channelInfoProgress").hide(),$("#channelInfoContent").css("margin-right","0px"),prevChanSelected=chanSelected,chanSelected=chanHistory[historyItemSelected],groupJumpCheck("history"),localStorage_setItem(menuChannelCookie,chanSelected),clearTimeout(ibarTimeOut),historyDeactivate(),refreshStream()}function historyDeactivate(){clearTimeout(historyTimeout),$("#historySelect").hide(),$("#historySelect").html(""),rebindKeys(),historyExecuted=!1}function prevChanToggle(){if(chanHistory.length>1&&(prevChanSelected=chanSelected,chanSelected=chanHistory[1]),"All"!=activeGroup&&0!=chanGroups){for(var e=0;e<chanGroups.length;e++){if(chanSelected<=chData[0][e].pos){activeGroup=chData[0][e-1].name,groupNr=e-1;break}chanSelected<=Number(localStorage_getItem("chCount"))&&(activeGroup=chData[0][e].name,groupNr=e)}localStorage_setItem(menuGroupCookie,groupNr)}}function refreshStream(e){clearTimeout(renderCompleteTimeout),retryCount=0,clearInterval(epgInterval),clearInterval(bcEPGInterval),clearTimeout(retryTimeOut),"firstLoad"!=e&&chanHistoryBuild(),$("#debugWindow").hide(),"none"==$("#infoBar").css("display")&&"none"==$("#fs_chanMenu").css("display")&&($("#bufferingInfo").hide(),$("#infoBar").show()),prevChanSelected!=chanSelected||firstLoad?($("#bitrateValue").html("Connecting..."),clearInterval(bufferInterval)):e||(clearTimeout(ibarTimeOut),permInfobar||(ibarTimeOut=setTimeout(hideInfo,4e3))),mbitSec=0,retryCount=0,getChInfo(),$(".channelInfoTitle").css("padding-bottom","0px"),$(".channelInfoMiddle").css("padding-bottom","10px"),chanDescriptionScrollReset()}function setCurrentTime(){if(currentDate=new Date,setTimerChannel(),currentDate.setHours(currentDate.getHours()+DST),currentDate.getMinutes()>=0&&currentDate.getMinutes()<=9)var e="0"+currentDate.getMinutes();else e=currentDate.getMinutes();$("#currentTime, #currentTimeTop").html(currentDate.getHours()+":"+e),$("#fsClock").html(currentDate.getHours()+":"+e)}function setTimerChannel(){$.each(allTimersArray,function(e,t){for(var a=0;a<t.length;a++)parseInt(currentDate.getTime()/1e3)-1==t[a]&&(prevChanSelected=chanSelected,chanSelected=Number(e),clearTimeout(ibarTimeOut),clearTimeout(numberKeyTimer),$("#fs_numberKeyField").hide(),historyDeactivate(),menuDeactivate(),arcFromMenu=!1,arcDeactivate(),groupJumpCheck(),localStorage_setItem(menuChannelCookie,chanSelected),refreshStream()),t[a]<parseInt(currentDate.getTime()/1e3)&&(allTimersArray[e].splice(a,1),localStorage_setItem("allTimers",JSON.stringify(allTimersArray)))})}function clearChEPG(){$("#channelEPGnow").html(""),$("#channelEPGlater").html(""),$("#channelInfoTitle").html(""),$("#channelInfoDesc").html(""),$("#channelTime1").html(""),$("#channelTime2").html(""),$("#channelLeft1").html(""),$("#channelLeft2").html(""),$(".progress").css({width:0}),$("#bar").css({width:0})}function getChEPG(e){$.ajax({method:"GET",url:epgPath+"get_epg_single.php",data:{channel:chNr,ch_name:chName,epgId:epgId},dataType:"json"}).done(function(e){if(e){var t=Number(e.start1)+3600*DST,a=Number(e.start2)+3600*DST,n=Number(e.start2)+3600*DST,o=Number(e.stop2)+3600*DST,c=(n-t)/60,r=Math.ceil((n-currentDate.getTime()/1e3)/60),i=Math.ceil((o-a)/60);i<0&&(i="&infin;");var s=e.epg1,l=e.epg2;if($("#channelEPGnow").html(s),$("#channelEPGlater").html(l),$("#channelInfoTitle").html(s),null!=e.description&&""!=e.description?$("#channelInfoDesc").html("<p>"+e.description+"</p>"):$("#channelInfoDesc").html(""),t=new Date(1e3*t),a=new Date(1e3*a),n=new Date(1e3*n),o=new Date(1e3*o),epgStart1Hours=t.getHours(),epgStart1Hours<10&&(epgStart1Hours="0"+epgStart1Hours),epgStart1Minutes=t.getMinutes(),epgStart1Minutes<10&&(epgStart1Minutes="0"+epgStart1Minutes),epgStart2Hours=a.getHours(),epgStart2Hours<10&&(epgStart2Hours="0"+epgStart2Hours),epgStart2Minutes=a.getMinutes(),epgStart2Minutes<10&&(epgStart2Minutes="0"+epgStart2Minutes),epgStop1Hours=n.getHours(),epgStop1Hours<10&&(epgStop1Hours="0"+epgStop1Hours),epgStop1Minutes=n.getMinutes(),epgStop1Minutes<10&&(epgStop1Minutes="0"+epgStop1Minutes),epgStop2Hours=o.getHours(),epgStop2Hours<10&&(epgStop2Hours="0"+epgStop2Hours),epgStop2Minutes=o.getMinutes(),epgStop2Minutes<10&&(epgStop2Minutes="0"+epgStop2Minutes),t=epgStart1Hours+":"+epgStart1Minutes,n=epgStop1Hours+":"+epgStop1Minutes,a=epgStart2Hours+":"+epgStart2Minutes,o=epgStop2Hours+":"+epgStop2Minutes,$("#channelTime1").html(t+" - "+n),$("#channelLeft1").html("+"+r),$("#channelTime2").html(a+" - "+o),$("#channelLeft2").html("+"+i),r>=0){var u=c/c*1e3;$(".progress").css({width:u,"max-width":"100%"});var h=Math.round((c-r)/c*1e3);$("#bar").css({width:h,"max-width":"100%"})}}else"noepg"==chNr?($("#channelEPGnow").html("No EPG code set, please check codes.siptv.app"),$("#channelEPGlater").html(chData[chanSelected].chUrl),$("#channelInfoTitle").html("No EPG code set, please check codes.siptv.app")):clearChEPG()}).always(function(){commonChannelZap(e)})}function commonChannelZap(e){"nozap"!=e&&(chData[chanSelected].par&&"on"!=sessionStorage.getItem("parentCode")?(mouseOn||$("#infoBar").hide(),$("#bitrateValue").html("Waiting..."),parentalCheck()):("none"==$("#infoBar").css("display")&&"none"==$("#fs_chanMenu").css("display")&&$("#infoBar").show(),chanZapper()))}function loadChInfo(){$.ajax({method:"GET",dataType:"json",url:scriptsPath+"get_data_local_fs.php",data:{cid:myUzer,keep:privateList,secret:secret,arc:0}}).done(function(e){epgIcons=e.icons,epgIconsHi=e.iconsHi,epgIconsSmall=e.iconsSmall,epgIconsSmallHi=e.iconsSmallHi,epgArchive=e.archive,!localStorage_getItem("chListUpdate")&&privateList&&localStorage_getItem("chData")?(console.log("Local!"),chData=JSON.parse(localStorage_getItem("chData")),processData()):(console.log("Server!"),chData=e.channels,chData?(privateList&&localStorage_removeItem("chListUpdate"),localStorage_setItem("chData",JSON.stringify(chData)),processData()):window.location.replace(backPath))}).fail(function(){console.log("Failed local!"),localStorage_getItem("chData")?(chData=JSON.parse(localStorage_getItem("chData")),epgIcons=[],epgIconsHi=[],epgIconsSmall=[],epgIconsSmallHi=[],epgArchive=[],processData()):window.location.replace(backPath)})}function processData(){dataLoaded=!0,chanGroups=chData[0],codeData=["ext"];for(var e=0,t=1;t<chData.length;t++)-1==codeData.indexOf(chData[t].chNr)&&(codeData[e]=chData[t].chNr,e++);if(localStorage_getItem("favList")){favList=JSON.parse(localStorage_getItem("favList"));for(var a=0;a<favList.length;a++)-1==codeData.indexOf(favList[a].chNr)&&(codeData[e]=favList[a].chNr,e++)}dvbChannelsImport&&!localStorage_getItem("dvbData")?addDVBChList():dvbChannelsImport?addDVBChListStored():channelFinalize()}function channelFinalize(){if(preloadFavourites(),preloadChannelData(),sortChannels(),"All"!=activeGroup&&0!=chanGroups)if(chanGroups.length>=activeGroup)for(var e=0;e<chanGroups.length;e++)activeGroup==e&&(groupNr=e,calcGroupDimensions());else groupNr=0,calcGroupDimensions();else"All"!=activeGroup&&localStorage_setItem(menuGroupCookie,"All");if(menuChanSelected=prevChanSelected,menuGroupNr=groupNr,menuActiveGroup=activeGroup,menuPageCount=pageCount,"avi"==chData[chanSelected].chNr)return localStorage_setItem("playerEntry","channels"),void channelLaunch();chDataLoaded=!0,refreshStream("firstLoad")}function preloadChannelData(){if(channelCount=chData.length-1,channelCountGlobal=chData.length-1,groupCount=chanGroups.length,(""==(chanSelected=Number(localStorage_getItem("currentChannel")))||chanSelected>channelCount)&&(chanSelected=1,localStorage_setItem(menuChannelCookie,chanSelected)),prevChanSelected=chanSelected,sessionStorage.getItem("chanHistory")){chanHistory=JSON.parse(sessionStorage.getItem("chanHistory"));for(var e=0;e<chanHistory.length;e++)void 0===chData[chanHistory[e]]&&(chanHistory.splice(e,1),e--)}else chanHistoryBuild();pageCount=Math.ceil(channelCount/pageItems),activeGroup="All",localStorage_getItem(menuGroupCookie)&&-1!=Number(localStorage_getItem(menuGroupCookie))&&Number(localStorage_getItem(menuGroupCookie))<groupCount&&1!=chanSelected?activeGroup=Number(localStorage_getItem(menuGroupCookie)):"All"!=localStorage_getItem(menuGroupCookie)&&-1!=Number(localStorage_getItem(menuGroupCookie))&&(activeGroup=0),groupNr=-1,activeGroupStart=0,activeGroupLength=channelCount,channelTail=channelCount-(pageCount-1)*pageItems}function addFavourite(){0==chData[0]&&(chData[0]=[],chData[0][0]={name:"Channels",pos:0},chData[0][1]={name:"Favourites",pos:chData.length-1,new:!0}),"Favourites"!=chData[0][chData[0].length-1].name&&(chData[0][chData[0].length]={name:"Favourites",pos:chData.length-1,new:!0});var e=$("#"+chanSelected+"_innerObjNo").width();if(favFound=!1,-1==favList.indexOf(chData[chanSelected].pos)){for(var t=0;t<favList.length;t++){if(favList[t].chUrl==chData[chanSelected].chUrl&&favList[t].chNr==chData[chanSelected].chNr){favIconValue='<span class="fs_eachFavItem">&#9733;</span>',favFound=!0;break}favFound=!1}favFound?($("#"+chanSelected+"_innerObjNo").html('<span class="favStar">?</span>'),$("#"+chanSelected+"_innerObjName").find(".fs_eachFavItem").css("visibility","hidden"),removeFavourite(!1)):(chData[chData.length]={gr:"Favourites",pos:chData.length,favPos:favList.length+1,chNr:chData[chanSelected].chNr,chName:chData[chanSelected].chName,chUrl:chData[chanSelected].chUrl,chUdp:chData[chanSelected].chUdp,par:chData[chanSelected].par,logoSmall:chData[chanSelected].logoSmall,logo:chData[chanSelected].logo,chArc:chData[chanSelected].chArc,chId:chData[chanSelected].chId?chData[chanSelected].chId:"",dvbNr:chData[chanSelected].dvbNr?chData[chanSelected].dvbNr:""},favList.push(chData[chData.length-1]),recalcChannelData(),localStorage_setItem("favList",JSON.stringify(favList)),$("#"+chanSelected+"_innerObjNo").html('<span class="favStar">?</span>'))}$("#"+chanSelected+"_innerObjNo").width(e),chanSelected==chData[0][groupNr+1].pos||mouseOn||chanSelector(1)}function removeFavourite(e){var t;if(e){if(-1!=favList.indexOf(chData[chanSelected].pos))favList.splice(favList.indexOf(chData[chanSelected].pos),1);else for(var a=0;a<favList.length;a++)if(favList[a].pos==chData[chanSelected].pos){favList.splice(a,1);break}if(chData.splice(chanSelected,1),0!==favList.length)for(var n=chanSelected;n<chData.length;n++)chData[n].pos=n,chData[n].favPos=chData[n].favPos-1;for(n=0;n<chanHistory.length;n++)(chanHistory[n]==chanSelected||chanHistory[n]>channelCount)&&chanHistory.splice(n,1)}else{for(var o=0;o<favList.length;o++)if(favList[o].chUrl==chData[chanSelected].chUrl){t=favList[o].pos,favList.splice(o,1);break}if(chData.splice(t,1),0!==favList.length)for(n=t;n<chData.length;n++)chData[n].pos=n,chData[n].favPos=chData[n].favPos-1;else chData[0].splice(chData[0].length-1,1),localStorage_setItem("favList","");for(n=0;n<chanHistory.length;n++)(chanHistory[n]==t||chanHistory[n]>channelCount)&&chanHistory.splice(n,1)}if(localStorage_setItem("favList",JSON.stringify(favList)),!e)return!1;channelCount=chData.length-1,recalcChannelData(),favStartPosition=chData[0][chData[0].length-1].pos,chanSelected<favStartPosition+1&&(chanSelected=favStartPosition+1),activeGroupLength=chData.length-1-favStartPosition,chData.length==chanSelected&&activeGroupLength>0&&chanSelector(-1),pgNr=Math.ceil((chanSelected-activeGroupStart)/pageItems),pageCount=Math.ceil(activeGroupLength/pageItems),activeGroupLength>0?shiftFavourites():(chData[0].splice(chData[0].length-1,1),localStorage_setItem("favList",""),groupNr=0,switchGroup())}function shiftFavourites(){loadMenu(pgNr,chanSelected)}function createHLS(e,t,a){prevChanSelected!=chanSelected&&(epochDate=(epochDate=new Date).getTime()),$.post(allScriptsPath+"scripts/hlser.php",{name:e,url:t,serial:myUzer,channel:a},function(e){playURL=allScriptsPath+"hls/"+e+"?utc="+epochDate,$("#debugWindow").html(t),chanContinue()})}function rodinaHLS(e,t){prevChanSelected!=chanSelected&&(epochDate=(epochDate=new Date).getTime()),$.post(allScriptsPath+"scripts/rodina/rodinaHLS.php",{serial:t,channel:e},function(e){playURL=allScriptsPath+"hls/"+e+"?utc="+epochDate,$("#debugWindow").html(""),chanContinue()})}function rodinaHLSOff(e,t){prevChanSelected!=chanSelected&&(epochDate=(epochDate=new Date).getTime()),rodina_sid=localStorage_getItem("rodina_sid"),rodinaURL="http://api.rodina.tv/list/m3u/"+e+"/"+rodina_sid,playURL=rodinaURL+"?utc="+epochDate,$("#debugWindow").html(rodinaURL),chanContinue()}function removeHLS(e){toRemoveHLS&&($.post(allScriptsPath+"scripts/hlser.php",{remove:"yes",serial:myUzer},function(e){}),toRemoveHLS=!1)}function removeHLSBack(e){toRemoveHLS?($.post(allScriptsPath+"scripts/hlser.php",{remove:"yes",serial:myUzer},function(e){window.location.replace(backPath)}),toRemoveHLS=!1):window.location.replace(backPath)}function getChInfo(){if(channelEpgCheck=chData[chanSelected].chNr,iconCheck=$.inArray(channelEpgCheck,epgIcons),iconCheckHi=$.inArray(channelEpgCheck,epgIconsHi),"dvb"==channelEpgCheck&&(iconCheck=-1,iconCheckHi=-1),urlData=chData[chanSelected].chUrl,chData[chanSelected].chUdp?urlUDP=chData[chanSelected].chUdp:(urlUDP=!1,urlUDPAuto=!1),-1!=urlData.indexOf("rodina-stream-")&&hlsMode&&!urlUDP)rodinaChNr=chData[chanSelected].chUrl.replace("rodina-stream-",""),rodinaHLS(rodinaChNr,myUzer);else if(-1==urlData.indexOf("rodina-stream-")||hlsMode)if(hlsMode&&-1==urlData.indexOf("m3u8")&&-1!=urlData.indexOf("http://")&&!urlUDP)createHLS(chData[chanSelected].chName,chData[chanSelected].chUrl,chData[chanSelected].chNr);else if(-1!=urlData.indexOf("rtmp://")){var e=chData[chanSelected].chUrl;e=e.replace("rtmp://","rtsp://"),playURL=e,$("#debugWindow").html(chData[chanSelected].chUrl)}else if(-1!=urlData.indexOf("rtp://")){var t=chData[chanSelected].chUrl;t=t.replace("rtp://","udp://"),playURL=t,$("#debugWindow").html(chData[chanSelected].chUrl)}else-1==urlData.indexOf("youtube.com")&&-1==urlData.indexOf("youtu.be")||"avi"==chData[chanSelected].chNr?-1!=urlData.indexOf("youtube.siptv.eu/live")?(urlid=urlData.split("urlid=")[1].split("&")[0],-1!=urlData.indexOf("res=")?res=urlData.split("res=")[1].split("&")[0]:res="",ytUrl="https://youtube.com?v="+urlid,jQuery.ajaxSetup({async:!1}),playURL=parseYoutubeLink(ytUrl,res),jQuery.ajaxSetup({async:!0}),$("#debugWindow").html(ytUrl)):(playURL=chData[chanSelected].chUrl,$("#debugWindow").html(playURL)):(-1!=urlData.indexOf("res=")?res=urlData.split("res=")[1].split("&")[0]:res="",jQuery.ajaxSetup({async:!1}),playURL=parseYoutubeLink(urlData,res),jQuery.ajaxSetup({async:!0}),$("#debugWindow").html(urlData));else rodinaChNr=chData[chanSelected].chUrl.replace("rodina-stream-",""),rodinaHLSOff(rodinaChNr,myUzer);!urlUDP&&urlUDPAuto&&(urlUDP=urlUDPAuto),chanContinue()}function chanContinue(){chFavPos=chData[chanSelected].favPos,chFavPos?($("#channelNumber").html(chData[chanSelected].favPos),$("#channelNmFav").show()):($("#channelNumber").html(chData[chanSelected].pos),$("#channelNmFav").hide()),$("#channelName span").html(chData[chanSelected].chName),$("#channelName").textfill({maxFontPixels:28}),chNr=chData[chanSelected].chNr,chName=chData[chanSelected].chName,chPos=chData[chanSelected].pos,chUrl=chData[chanSelected].chUrl,chLogo=chData[chanSelected].logo,chId=chData[chanSelected].chId?chData[chanSelected].chId:"",dvbNr=chData[chanSelected].dvbNr?chData[chanSelected].dvbNr:"",dvbS=!1,-1!=iconCheckHi&&"dvb"!=chNr&&"ext"!=chNr?$("#chPicon").css({background:"url("+iconsPath+"icons_hi/"+chNr+".png) no-repeat right center "}).css({"background-size":"contain"}):-1!=iconCheck&&"dvb"!=chNr&&"ext"!=chNr?$("#chPicon").css({background:"url("+iconsPath+"icons/"+chNr+".png) no-repeat right center"}):chLogo&&"dvb"!=chNr?$("#chPicon").css({background:"url("+chLogo+") no-repeat right center"}).css({"background-size":"contain"}):"dvb-"==dvbNr.substr(0,4)||"dvbt-"==dvbNr.substr(0,5)?$("#chPicon").css({background:"url("+imagesPath+"icons/small/dvb.png) no-repeat right center"}).css({"background-size":"contain"}):"dvbc-"==dvbNr.substr(0,5)?$("#chPicon").css({background:"url("+imagesPath+"icons/small/dvbc.png) no-repeat right center"}).css({"background-size":"contain"}):"dvbs-"==dvbNr.substr(0,5)?(dvbS=!0,$("#chPicon").css({background:"url("+imagesPath+"icons/small/dvbs.png) no-repeat right center"}).css({"background-size":"contain"})):$("#chPicon").css({background:"none"}),audioChNr="ext"==chNr||"avi"==chNr?chPos:chNr,localStorage_getItem("audio-"+audioChNr)&&(urlUDP=localStorage_getItem("audio-"+audioChNr)),-1!=chUrl.indexOf("tv://")?($("#btn_audio").css("visibility","hidden"),bcEPG=!0,clearChEPG(),commonChannelZap(),broadcastOn(!0)):(wosBufferingInfo(),$("#btn_audio").css("visibility","visible"),getChEPG())}function chanZapper(){if(video.paused||prevChanSelected!=chanSelected||firstLoad){$("#video").unbind("emptied"),$("#video").empty();var e={};-1!=playURL.indexOf("m3u8")?e.mediaTransportType="HLS":e.mediaTransportType="URI",e.htmlMediaOption={},e.htmlMediaOption.useUMSMediaInfo=!0,subsOn=!0,e.option={},e.option.subtitle={},e.option.subtitle.show=subsOn;var t=escape(JSON.stringify(e));"dvb-"!=playURL.substr(0,4)&&"dvbt-"!=playURL.substr(0,5)&&"dvbc-"!=playURL.substr(0,5)&&"dvba-"!=playURL.substr(0,5)&&"dvbs-"!=playURL.substr(0,5)||(playURL=getDVBAddress(playURL));var a=document.createElement("source");a.setAttribute("src",playURL),-1!=playURL.indexOf("tv://")?videoType="service/webos-broadcast":videoType="video/mp4",a.setAttribute("type",videoType+";mediaOption="+t),video.appendChild(a),video.load(),video.addEventListener("umsmediainfo",function(e){handleUMSMediaInfo(e.detail)},!1)}$("#btn_pause").html('<img src="images/new/icon_pause.svg" />'),firstLoad=!1}function toggleAudioLanguage(){1==video.playState?changeLanguage():audioLangTimeout=setTimeout(toggleAudioLanguage,500)}function changeLanguage(){video.audioLanguage=urlUDP}function toggleDebugWindow(){$("#debugWindow").toggle()}function parseYoutubeLink(e,t){var a;return-1!=e.indexOf("http://youtu.be/")?yt_id=e.replace("http://youtu.be/",""):-1!=e.indexOf("https://youtu.be/")?yt_id=e.replace("https://youtu.be/",""):yt_id=e.split("?v=")[1],inputUrl="https://www.youtube.com/get_video_info?video_id="+yt_id,xhr=$.ajax({url:inputUrl,dataType:"text"}).done(function(e){uriComponents=e.split("&"),uriArray={},$.each(uriComponents,function(e,t){valuesArray=t.split("="),uriArray[valuesArray[0]]=valuesArray[1].replace(/\+/g,"%20")});var n="";if("UNPLAYABLE"!=JSON.parse(decodeURIComponent(uriArray.player_response)).playabilityStatus.status)try{n=JSON.parse(decodeURIComponent(uriArray.player_response)).streamingData.hlsManifestUrl}catch(e){console.error(e)}n&&"fail"!=uriArray.status?"auto"==t?a=n:$.ajax({url:n,dataType:"text"}).done(function(e){maxRes=0,streamMap=e.split(/[\r\n]/),$.each(streamMap,function(e,n){if(valuesArray=n.split("RESOLUTION="),!valuesArray[1])return!0;if(resolution=Number(valuesArray[1].split("x")[1].split(",")[0]),resolution>maxRes&&!t)maxRes=resolution,a=streamMap[e+1];else if(t&&-1!==n.indexOf("x"+t+","))return a=streamMap[e+1],!1})}).fail(function(){a=n}):(a="yt-fail",$("#bitrateValue").html("Failed!"))}).fail(function(){a="yt-fail"}),a}function getAnalyticsIdle(){ga("send","pageview")}favList=[];