function loadArchive(e,a){allTimersArray[chanSelected]||(allTimersArray[chanSelected]=[]);var r=new Date,t=new Date,c=Math.floor(r.getTime()/1e3);chData=JSON.parse(sessionStorage.getItem("arcChannelData")),setArcDate(),arcJSONPath=0==a?epgPath+"get_epg_schedule.php":epgPath+"get_epg_archive.php",unbindArcClickEvents(),$("#arc_MenuContainer").remove(),$("#innerContainer").append('<div id="arc_MenuContainer"></div>'),$("#fs_arcMenu").show(),chanJSON=chData.chNr,arcUrlCheck=chData.chUrl,chanName=chData.chName,jsonArc=chData.chArc,hideDays(chData),t.setDate(t.getDate()+a),yy=t.getFullYear(),dd=t.getDate(),mm=t.getMonth()+1,day=t.toString().split(" ")[0],dd<10&&(dd="0"+dd),mm<10&&(mm="0"+mm),newDateString=yy+"-"+mm+"-"+dd,$.ajax({method:"GET",url:arcJSONPath,data:{channel:chanJSON,day:arcJump,epgId:epgId},dataType:"json"}).done(function(r){var t;progEPG=r,arcChanName();var n=0;for(utcTime=[],t=0;t<r.epg.length;t++){if(progStart=new Date(1e3*r.start[t]),progStartHours=progStart.getHours(),progStartHours+=DST,progStartMinutes=progStart.getMinutes(),progStartHours>=24?progStartHours-=24:progStartHours<0&&(progStartHours+=24),progStartHours<10&&(progStartHours="0"+progStartHours),progStartMinutes<10&&(progStartMinutes="0"+progStartMinutes),progStop=new Date(1e3*r.stop[t]),progStopHours=progStop.getHours(),progStopHours+=DST,progStopMinutes=progStop.getMinutes(),progStopHours>=24?progStopHours-=24:progStopHours<0&&(progStopHours+=24),progStopHours<10&&(progStopHours="0"+progStopHours),progStopMinutes<10&&(progStopMinutes="0"+progStopMinutes),arcTime=progStartHours+":"+progStartMinutes+" - "+progStopHours+":"+progStopMinutes,utcTime[t+1]=r.start[t],arcLink="arc_play.html?chan="+e+"&day=0&pg=1&utc="+utcTime,jsonArc&&r.start[t]<=c?arcClass='class="arc_eachMenuArcOn"':arcClass="",c>r.start[t]&&c<r.stop[t]){chanClass="arc_eachMenuSelected";var o=t+1;timeActive='style="color: rgb(235,235,235);"',nameActive='style="color: rgb(235,235,235);"'}else chanClass="arc_eachMenuDefault",timeActive="",nameActive="";0!=a&&(t+1==1?chanClass="arc_eachMenuSelected":(chanClass="arc_eachMenuDefault",timeActive="",nameActive="")),chanBack=(t+1)%2==0?" arcEven":" arcOdd",-1!=allTimersArray[chanSelected].indexOf(r.start[t])&&r.start[t]>parseInt(currentDate.getTime()/1e3)-3600*DST?timerClass='<span class="fs_eachTimerItem">&bull;</span>':timerClass="",$("#arc_MenuContainer").append("<div id=arc-"+(t+1)+' class="'+chanClass+chanBack+'" style="top: '+38*n+'px;">\t\t\t\t\t<span id="'+(t+1)+'_arcObjName" class="arc_eachMenuTime"'+timeActive+">"+arcTime+timerClass+'</span>\t\t\t\t\t<span id="'+(t+1)+'_arcObjEPG" class="arc_eachMenuEPG"'+nameActive+'style="color:'+selectedEPGColor+';">'+r.epg[t]+'</span>\t\t\t\t\t<span id="'+(t+1)+'_arcObjEPG" '+arcClass+"></span>\t\t\t\t</div>"),n++}$("#topLabelName").show(),$("#arcChanName").html(chanName+" EPG");var s=$("#arc_MenuContainer").height()/$("#arc_MenuContainer")[0].scrollHeight;if(arcScrollHeight=$("#arc_MenuContainer")[0].scrollHeight,arcViewportHeight=$("#arc_MenuContainer").height(),arcScrollPosition=$("#arc_MenuContainer").scrollTop(),arcMenuProgressHeight=$("#arcMenuProgress").height(),arcProgRunnerHeight=$("#arcMenuProgress").height()*s,arcProgRunnerTop=$("#arc_MenuContainer").scrollTop(),arcViewportHeight<arcScrollHeight&&($("#arcMenuProgress").show(),$("#arcProgRunner").css("height",arcProgRunnerHeight+"px"),$("#arcProgRunner").css("top",arcProgRunnerTop+"px"),$(document).bind("mousewheel",function(e,a){arcMouseScroll()})),arcKeyScroll(),arcClickEvents(),arcMouseChanSelector(),marqueeTimeout=setTimeout(arc_marqueeOn,600),arcChanSelected=o&&0==a?o:1,totalScrollItems=n,0==a&&o>pageItems)for(p=0;p<Math.floor(o/pageItems);p++)arcScrollDown()})}function arcChanName(){$("#groupName").html(chanName),$("#arcMenuNavigation").html(day+" "+mm+"/"+dd)}function hideDays(e){jsonArc?archiveExists=!0:archiveExists=!1,archiveExists?(0!=dayNr&&$("#page_right").show(),-15!=dayNr&&$("#page_left").show()):$("#btn_daydn, #btn_dayup").hide()}function arcChanSelector(e){marqueeOff(),$("[class*=arc_eachMenuSelected]").toggleClass("arc_eachMenuSelected arc_eachMenuDefault"),$("[class*=fs_eachTimerClock]").remove(),arcChanSelected+=e,arcChanSelected<=0?arcChanSelected=1:arcChanSelected>totalScrollItems&&(arcChanSelected=totalScrollItems);var a=$("#arc-"+arcChanSelected).position().top;a>=38*pageItems?arcScrollDown():a<0&&arcScrollUp(),$("#arc-"+arcChanSelected).toggleClass("arc_eachMenuDefault arc_eachMenuSelected"),marqueeTimeout=setTimeout(arc_marqueeOn,600),!$("#"+arcChanSelected+"_arcObjEPG .fs_eachTimerClock").length&&progEPG.start[arcChanSelected-1]>parseInt(currentDate.getTime()/1e3)-3600*DST&&$("#"+arcChanSelected+"_arcObjEPG").append('<span class="fs_eachTimerClock"><img src="images/new/icon_clock.svg"></span>'),$("#"+arcChanSelected+"_arcObjName .fs_eachTimerItem").length?$("#fsTimerButton span").html("Remove Timer"):$("#fsTimerButton span").html("Set Timer")}function arcChannelLaunch(){$("#arc-"+arcChanSelected).children(".arc_eachMenuArcOn").attr("id")&&(arcID=Number($("#arc-"+arcChanSelected).attr("id").replace("arc-","")),localStorage_setItem("arcChannel",chanSelected),localStorage_setItem("arcOffset",utcTime[arcID]),localStorage_setItem("arcEntry","archive"),localStorage_setItem("arcDay",dayNr),window.location="arc_play.html"),progEPG.start[arcChanSelected-1]>parseInt(currentDate.getTime()/1e3)-3600*DST&&setTimer()}function arcClickEvents(){$(".arc_eachMenuDefault, .arc_eachMenuSelected").click(function(){var e=$(this).children(".arc_eachMenuArcOn").attr("id");$(event.target).attr("class"),e&&(arcID=Number(e.replace("_arcObjEPG","")),localStorage_setItem("arcChannel",chanSelected),localStorage_setItem("arcOffset",utcTime[arcID]),localStorage_setItem("arcEntry","archive"),localStorage_setItem("arcDay",dayNr),window.location="arc_play.html"),setTimer("mouse")})}function unbindArcClickEvents(){$(".arc_eachMenuDefault, .arc_eachMenuSelected").off()}function arc_marqueeCalc(e){var a=$("#"+e+"_arcObjEPG").textWidth(),r=$("#"+e+"_arcObjEPG").width();a>r&&($("#"+e+"_arcObjEPG").addClass("marquee"),marqueeEPG(r))}function arc_marqueeOn(){var e=arcChanSelected,a=$("#"+e+"_arcObjEPG").textWidth(),r=$("#"+e+"_arcObjEPG").width();a>r&&($("#"+e+"_arcObjEPG").addClass("marquee"),marqueeEPG(r))}function marqueeEPG(e){$(".marquee").marquee({allowCss3Support:!1,duplicated:!0,duration:8e3,gap:e/2,delayBeforeStart:0,direction:"left"})}function marqueeOff(){$(".js-marquee").unwrap(),$(".js-marquee:first").remove(),$(".js-marquee").contents().unwrap(),$("[class*=marquee]").removeClass("marquee"),clearTimeout(marqueeTimeout)}function arcKeyScroll(){$(document).keydown(function(e){switch(e.which){case 39:arcChanSelector(14);break;case 37:arcChanSelector(-14);break;case 40:arcChanSelector(1);break;case 38:arcChanSelector(-1);break;case 13:arcChannelLaunch()}})}function arcMouseChanSelector(){$(".arc_eachMenuDefault, .arc_eachMenuSelected").hover(function(){$("[class*=arc_eachMenuSelected]").toggleClass("arc_eachMenuSelected arc_eachMenuDefault"),$(this).toggleClass("arc_eachMenuDefault arc_eachMenuSelected"),hoverID=this.id,arcChanSelected=Number(hoverID.replace("arc-","")),marqueeTimeout=setTimeout(function(){arc_marqueeOn(hoverID)},600),mousePrevSelected=$("#"+hoverID).attr("id"),!$("#"+arcChanSelected+"_arcObjEPG .fs_eachTimerClock").length&&progEPG.start[arcChanSelected-1]>parseInt(currentDate.getTime()/1e3)-3600*DST&&$("#"+arcChanSelected+"_arcObjEPG").append('<span class="fs_eachTimerClock"><img src="images/new/icon_clock.svg"></span>'),$("#"+arcChanSelected+"_arcObjName .fs_eachTimerItem").length?$("#fsTimerButton span").html("Remove Timer"):$("#fsTimerButton span").html("Set Timer")},function(){$(this).toggleClass("arc_eachMenuSelected arc_eachMenuDefault"),marqueeOff(),$("[class*=fs_eachTimerClock]").remove()})}function arcMarqueeCalc(e){var a=$("#"+e+"_innerObjEPG").textWidth(),r=$("#"+e+"_innerObjEPG").width();a>r&&($("#"+e+"_innerObjEPG").addClass("marquee"),marqueeEPG(r))}function arcMouseScroll(){window.event.wheelDelta>0?arcScrollUp():arcScrollDown()}function arcScrollUp(){arcScrollPosition-=arcViewportHeight,arcScrollPosition<0&&(arcScrollPosition=0),$("#arc_MenuContainer").scrollTop(arcScrollPosition),arcProgRunnerTop=Math.round(arcMenuProgressHeight*$("#arc_MenuContainer").scrollTop()/arcScrollHeight),$("#arcProgRunner").css("top",arcProgRunnerTop+"px")}function arcScrollDown(){arcScrollPosition+=arcViewportHeight,arcScrollPosition+arcViewportHeight>arcScrollHeight&&(arcScrollPosition=arcScrollHeight-arcViewportHeight),$("#arc_MenuContainer").scrollTop(arcScrollPosition),arcProgRunnerTop=Math.round(arcMenuProgressHeight*$("#arc_MenuContainer").scrollTop()/arcScrollHeight),$("#arcProgRunner").css("top",arcProgRunnerTop+"px")}function arcScrollReset(){$(document).unbind("keydown keyup"),$("#arcMenuProgress").hide(),$("#arc_MenuContainer").scrollTop(0),$("#arcProgRunner").css("height","0px"),$("#arcProgRunner").css("top","0px")}