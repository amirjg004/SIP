function loadGroups(){unbindGrClickEvents(),$("#fs_MenuContainer").remove(),$("#fs_MenuContainerBack").append('<div id="fs_MenuContainer"></div>'),$("#fs_chanMenu").show(),$("#fsYellowButton span").html("All Channels");var e=0;for(i=0;i<chanGroups.length;i++)"All"!=activeGroup?i==groupNr?(grSelected=i+1,chanClass="fs_eachMenuSelected"):chanClass="fs_eachMenuDefault":0==i?(grSelected=i+1,chanClass="fs_eachMenuSelected"):chanClass="fs_eachMenuDefault",i==chanGroups.length-1?groupChannelCount=channelCountGlobal-chanGroups[i].pos:groupChannelCount=chanGroups[i+1].pos-chanGroups[i].pos,1==groupChannelCount?channelWord=" channel":channelWord="&nbsp;&nbsp;channels","Favourites"==chanGroups[i].name?(fsGroupIconClass="fs_eachFavPicon",fsGroupIconValue="&#9733;"):"DVB Channels"==chanGroups[i].name?(fsGroupIconClass="fs_eachDVBPicon",fsGroupIconValue=""):(fsGroupIconClass="fs_eachGroupPicon",fsGroupIconValue=""),chData[i+1].pos<10?chNumStyle='style="width: 32px; text-align: center;"':chNumStyle="",$("#fs_MenuContainer").append("<div id="+(i+1)+' class="'+chanClass+'" style="top: '+38*e+'px">\t\t\t\t\t<span id="'+(i+1)+'_grNr" class="fs_eachMenuNo"'+chNumStyle+">"+(i+1)+'</span>\t\t\t\t\t<span id="'+(i+1)+'_grIcon" class="'+fsGroupIconClass+'">'+fsGroupIconValue+'</span>\t\t\t\t\t<span id="'+(i+1)+'_grName" class="fs_eachGroupName">'+chanGroups[i].name+'</span>\t\t\t\t\t<span id="'+(i+1)+'_grCount" class="fs_eachGroupChannels" style="color:'+selectedEPGColor+';">'+groupChannelCount+channelWord+"</span>\t\t\t\t</div>"),e++;var n=$("#fs_MenuContainer").height()/(38*chanGroups.length);if(grScrollHeight=38*chanGroups.length,grViewportHeight=$("#fs_MenuContainer").height(),grScrollPosition=$("#fs_MenuContainer").scrollTop(),grMenuProgressHeight=$("#fsMenuProgress").height(),grProgRunnerHeight=$("#fsMenuProgress").height()*n,grProgRunnerTop=$("#fs_MenuContainer").scrollTop(),$("#arcMenuProgress").show(),grViewportHeight<grScrollHeight?($("#progRunner").show(),$("#progRunner").css("height",grProgRunnerHeight+"px"),$("#progRunMid").css("height",grProgRunnerHeight-10+"px"),$("#progRunner").css("top",grProgRunnerTop+"px"),$(document).bind("mousewheel",function(e,n){grMouseScroll()})):$("#progRunner").hide(),$("#topGroupName").hide(),$("#fsGreenButton").hide(),$("#fsBlueButton").hide(),$("#fsInfoButton").hide(),$("#fsRedButton").hide(),totalScrollItems=e,groupNr+1>pageItems)for(p=0;p<Math.floor((groupNr+1)/pageItems);p++)grScrollDown();grMouseEvents(),grClickEvents()}function grChanSelector(e){$("[class*=fs_eachMenuSelected]").toggleClass("fs_eachMenuSelected fs_eachMenuDefault"),grSelected+=e,grSelected<=0?grSelected=1:grSelected>totalScrollItems&&(grSelected=totalScrollItems),$("#"+grSelected).toggleClass("fs_eachMenuDefault fs_eachMenuSelected");var n=$("#"+grSelected).position().top;n>=38*pageItems?grScrollDown():n<0&&grScrollUp()}function groupSelect(){groupOn=!0,groupNr=grSelected-1,$(document).unbind("mousewheel"),$(document).bind("mousewheel",function(e,n){mouseScroll()}),switchGroup(),fsMenuKeyEvents()}function grScrollUp(){grScrollPosition-=grViewportHeight,grScrollPosition<0&&(grScrollPosition=0),$("#fs_MenuContainer").scrollTop(grScrollPosition),grProgRunnerTop=Math.round(grMenuProgressHeight*$("#fs_MenuContainer").scrollTop()/grScrollHeight),$("#progRunner").css("top",grProgRunnerTop+"px")}function grScrollDown(){grScrollPosition+=grViewportHeight,grScrollPosition+grViewportHeight>grScrollHeight&&(grScrollPosition=grScrollHeight-grViewportHeight),$("#fs_MenuContainer").scrollTop(grScrollPosition),grProgRunnerTop=Math.round(grMenuProgressHeight*$("#fs_MenuContainer").scrollTop()/grScrollHeight),$("#progRunner").css("top",grProgRunnerTop+"px")}function grScrollReset(){$("#progRunner").hide(),$("#fs_MenuContainer").scrollTop(0),$("#progRunner").css("height","0px"),$("#progRunner").css("top","0px")}function grMouseEvents(){$(".fs_eachMenuDefault, .fs_eachMenuSelected").hover(function(){$(".fs_eachMenuSelected").attr("class","fs_eachMenuDefault"),$(this).attr("class","fs_eachMenuSelected"),hoverID=this.id,hoverID=Number(hoverID.replace("arc-","")),grSelected=hoverID},function(){$(this).attr("class","fs_eachMenuDefault")})}function grMouseScroll(){window.event.wheelDelta>0?grScrollUp():grScrollDown()}function grClickEvents(){$(".fs_eachMenuDefault, .fs_eachMenuSelected").click(function(){grSelected=$(this).attr("id"),groupSelect()})}function unbindGrClickEvents(){$("[class$='eachMenuDefault']").off(),$(document).unbind("mousewheel")}