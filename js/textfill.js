!function(i){i.fn.textfill=function(t){function n(){s.debug&&"undefined"!=typeof console&&void 0!==console.debug&&console.debug.apply(console,arguments)}function e(i,t,e,l,s,o){function c(i,t){var n=" / ";return i>t?n=" > ":i==t&&(n=" = "),n}n(i+"font: "+t.css("font-size")+", H: "+t.height()+c(t.height(),e)+e+", W: "+t.width()+c(t.width(),l)+l+", minFontPixels: "+s+", maxFontPixels: "+o)}function l(i,t,n,l,s,o,c,h){for(e(i+": ",t,s,o,c,h);c<h-1;){var a=Math.floor((c+h)/2);if(t.css("font-size",a),n.call(t)<=l){if(c=a,n.call(t)==l)break}else h=a;e(i+": ",t,s,o,c,h)}return t.css("font-size",h),n.call(t)<=l&&e(i+"* ",t,s,o,c=h,h),c}var s=i.extend({debug:!1,maxFontPixels:40,minFontPixels:4,innerTag:"span",widthOnly:!1,callback:null,complete:null,explicitWidth:null,explicitHeight:null},t);return this.each(function(){var t=i(s.innerTag+":visible:first",this),e=s.explicitHeight||i(this).height(),o=s.explicitWidth||i(this).width(),c=t.css("font-size");n("Opts: ",s),n("Vars: maxHeight: "+e+", maxWidth: "+o);var h=s.minFontPixels,a=0>=s.maxFontPixels?e:s.maxFontPixels,f=void 0;s.widthOnly||(f=l("H",t,i.fn.height,e,e,o,h,a)),h=l("W",t,i.fn.width,o,e,o,h,a),s.widthOnly?t.css("font-size",h):t.css("font-size",Math.min(f,h)),n("Final: "+t.css("font-size")),(t.width()>o||t.height()>e)&&t.css("font-size",c),s.callback&&s.callback(this)}),s.complete&&s.complete(this),this}}(window.jQuery);