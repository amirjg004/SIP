var audioCode,hlsCode,retryAudioLangInterval,audioCount=0,audioLangID=[],audioTrackSet=!1,audioLangRetryCount=0,trackLineHeight=38,maxTrackWindowHeight=304,maxAudioCount=8,maxSubsCount=8;function getAudioInfo(){-1!=playURL.indexOf("m3u8")?audioCount>1?$("#btn_audio").html('<img src="images/new/icon_audio.svg" />'):$("#btn_audio").html("HLS"):$("#btn_audio").html('<img src="images/new/icon_audio.svg" />')}function chooseAudioLang(){if(!bcastExecuted){if($("#aspectButton").hide(),audioWindow=!audioWindow,!audioWindow)return $("#audioSelect").hide(),void rebindKeys();$("#audioSelect").show(),chooseSubsLangDeactivate(),subsCount>0?$("#audioToolPanel").show():$("#audioToolPanel").hide(),$(".audioLang").remove(),audioCount>1?(historyExecuted&&historyDeactivate(),showAudioLangs(),fsAudioKeyEvents()):(1==audioCount&&audioLangNameArray[0]?(langArray[audioLangNameArray[0]]?audioLangName=langArray[audioLangNameArray[0]]:audioLangName=audioLangNameArray[0].toUpperCase(),$("#audioSelect #audioText").append('<div id="noaudio" class="audioLang">'+audioLangName+"</div>")):$("#audioSelect #audioText").append('<div id="noaudio" class="audioLang">Audio 1</div>'),audioSet=!audioSet,fsAudioKeyEvents())}}function showAudioLangs(){audioLangList="";for(var a=0;a<audioCount;a++)langArray[audioLangNameArray[a]]&&!audioCodecNameArray[a]?audioLangName=langArray[audioLangNameArray[a]]:audioCodecNameArray[a]?audioLangName=(audioLangNameArray[a]+" "+audioCodecNameArray[a]).toUpperCase():audioLangName=audioLangNameArray[a].toUpperCase(),a==audioIDSelected&&audioCount>1?audioSelected=" selected":audioSelected="",1==audioCount&&(audioSet=!audioSet),$("#audioSelect #audioText").append('<div id="audio-'+a+'" class="audioLang'+audioSelected+'" style="top: '+38*a+'px">'+audioLangName+"</div>");checkAudioSelectedPosition(),fsAudioMouseEvents()}function checkAudioSelectedPosition(){var a=parseInt($("#audio-"+audioIDSelected).css("top"),10)+trackLineHeight;a>=maxTrackWindowHeight?$("#audioText").css("top",-1*(a-maxTrackWindowHeight)):a==trackLineHeight&&$("#audioText").css("top",0)}function selectAudioLang(a){audioOKPressed&&(audioSet=!1),$("#audio-"+audioIDSelected).removeClass("selected"),audioIDSelected+=a,audioIDSelected<0&&(audioIDSelected=audioCount-1),audioIDSelected>audioCount-1&&(audioIDSelected=0),checkAudioSelectedPosition(),$("#audio-"+audioIDSelected).addClass("selected")}function setAudioLang(a){if(audioSet||audioPrevIDSelected==audioIDSelected)chooseAudioLangDeactivate();else try{webOS.service.request("luna://com.webos.media",{method:"selectTrack",parameters:{type:"audio",index:audioLangID[audioIDSelected],mediaId:video.mediaId},onSuccess:function(a){},onFailure:function(a){}}),audioPrevIDSelected=audioIDSelected,audioOKPressed=!0,audioSet=!1,audioCode=audioLangID[audioIDSelected],setAudioCookie(),"mouse"==a&&chooseAudioLangDeactivate()}catch(a){console.log(a)}}function getAudioLang(){if("ext"==chNr||"avi"==chNr?audioChNr=chPos:audioChNr=chNr,localStorage_getItem("audio-"+audioChNr)&&(audioCode=localStorage_getItem("audio-"+audioChNr)),audioCode)try{for(var a=0;a<audioCount;a++)audioLangID[a]==audioCode&&(webOS.service.request("luna://com.webos.media",{method:"selectTrack",parameters:{type:"audio",index:audioLangID[a],mediaId:video.mediaId},onSuccess:function(a){},onFailure:function(a){}}),audioIDSelected=a,audioPrevIDSelected=a)}catch(a){console.log(a)}else audioIDSelected=0,audioPrevIDSelected=0}function chooseAudioLangDeactivate(){$("#audioSelect").hide(),audioWindow=!1,rebindKeys(),audioOKPressed=!1,audioSet=!1,hlsOKPressed=!1,hlsSet=!1}function setAudioCookie(){"ext"==chNr||"avi"==chNr?audioChNr=chPos:audioChNr=chNr,localStorage_setItem("audio-"+audioChNr,audioCode)}function clearAudioCookie(){"ext"==chNr||"avi"==chNr?audioChNr=chPos:audioChNr=chNr,localStorage_removeItem("audio-"+audioChNr)}function fsAudioMouseEvents(){$("[id*='audio-']").hover(function(){$("[id*='audio-']").removeClass("selected"),$(this).addClass("selected")},function(){$(this).removeClass("selected")}),$("[id*='audio-']").click(function(){audioIDSelected=$(this).attr("id"),audioIDSelected=audioIDSelected.replace("audio-",""),setAudioLang("mouse")})}langArray={aa:"Afar",ab:"Abkhazian",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",bm:"Bambara",be:"Belarusian",bn:"Bengali",bh:"Bihari",bi:"Bislama",bo:"Tibetan",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",cs:"Czech",ch:"Chamorro",ce:"Chechen",zh:"Chinese",cu:"Church",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",cy:"Welsh",da:"Danish",de:"German",dv:"Divehi",nl:"Dutch",dz:"Dzongkha",en:"English",eo:"Esperanto",et:"Estonian",eu:"Basque",ee:"Ewe",fo:"Faroese",fa:"Persian",fj:"Fijian",fi:"Finnish",fr:"French",fy:"Frisian W",ff:"Fulah",ka:"Georgian",gd:"Gaelic",ga:"Irish",gl:"Galician",gv:"Manx",gn:"Guarani",gu:"Gujarati",ht:"Haitian",ha:"Hausa",he:"Hebrew",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hr:"Croatian",hu:"Hungarian",ig:"Igbo",is:"Icelandic",io:"Ido",ii:"Sichuan Yi",iu:"Inuktitut",ie:"Interlingue",ia:"Interlingua",id:"Indonesian",ik:"Inupiaq",it:"Italian",jv:"Javanese",ja:"Japanese",kl:"Kalaallisut",kn:"Kannada",ks:"Kashmiri",kr:"Kanuri",kk:"Kazakh",km:"Khmer C",ki:"Kikuyu",rw:"Kinyarwanda",ky:"Kirghiz",kv:"Komi",kg:"Kongo",ko:"Korean",kj:"Kuanyama",ku:"Kurdish",lo:"Lao",la:"Latin",lv:"Latvian",LAV:"Latvian",li:"Limburgan",ln:"Lingala",lt:"Lithuanian",lb:"Luxembourgish",lu:"Luba-Katanga",lg:"Ganda",mk:"Macedonian",mh:"Marshallese",ml:"Malayalam",mi:"Maori",mr:"Marathi",ms:"Malay",mg:"Malagasy",mt:"Maltese",mn:"Mongolian",na:"Nauru",nv:"Navajo",nr:"Ndebele S",nd:"Ndebele N",ng:"Ndonga",ne:"Nepali",nn:"Norwegian",nb:"Bokmal",no:"Norwegian",ny:"Chichewa",oc:"Occitan",oj:"Ojibwa",or:"Oriya",om:"Oromo",os:"Ossetian",pa:"Panjabi",pi:"Pali",pl:"Polish",pt:"Portuguese",ps:"Pushto",qu:"Quechua",rm:"Romansh",ro:"Romanian",rn:"Rundi",ru:"Russian",sg:"Sango",sa:"Sanskrit",si:"Sinhala",sk:"Slovak",sl:"Slovenian",se:"Sami N",sm:"Samoan",sn:"Shona",sd:"Sindhi",so:"Somali",st:"Sotho S",es:"Spanish",sc:"Sardinian",sr:"Serbian",ss:"Swati",su:"Sundanese",sw:"Swahili",sv:"Swedish",ty:"Tahitian",ta:"Tamil",tt:"Tatar",te:"Telugu",tg:"Tajik",tl:"Tagalog",th:"Thai",ti:"Tigrinya",to:"Tonga",tn:"Tswana",ts:"Tsonga",tk:"Turkmen",tr:"Turkish",tw:"Twi",ug:"Uighur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang",zu:"Zulu"};